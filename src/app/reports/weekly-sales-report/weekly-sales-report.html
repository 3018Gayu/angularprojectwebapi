<div class="fullscreen-container" style="background-image: url('https://static.vecteezy.com/system/resources/previews/011/427/201/non_2x/b2b-sales-person-selling-products-and-services-to-buyer-in-laptop-business-to-business-sales-b2b-sales-method-wholesale-business-trend-concept-flat-modern-illustration-vector.jpg'); background-size: contain; background-position: center; background-repeat: no-repeat; background-attachment: fixed; min-height: 100vh; position: relative;">

  <div class="overlay" style="position: absolute; inset: 0; background-color: rgba(183,189,247,0.3);"></div>

  <div class="content d-flex align-items-center justify-content-center" style="position: relative; z-index: 2; min-height: 100vh;">
    <div class="card shadow-lg" style="background-color: rgba(255,248,222,0.95); border-radius: 15px; max-width: 1000px; width: 100%;">

      <div class="card-header d-flex justify-content-between align-items-center" style="background-color: #576A8F; color: white;">
        <h2 class="m-0">Weekly Sales Report</h2>
        <button class="btn btn-sm" style="background-color: #FF7444; color: white;" (click)="downloadPdf()">
          <i class="fas fa-download me-1"></i>Download PDF
        </button>
      </div>

      <div class="card-body">

        <!-- DATE FILTER -->
        <div class="row g-3 mb-4">
          <div class="col-md-6">
            <label class="form-label fw-bold" style="color:#576A8F;">
              Start Date (7 days auto)
            </label>
            <input
              type="date"
              [(ngModel)]="startDate"
              (change)="getWeeklySales()"
              class="form-control"
              style="border-radius:8px;"
            />
            <small class="text-muted">
              Week: {{ startDate }} â†’ {{ endDate }}
            </small>
          </div>

          <div class="col-md-6 d-flex align-items-end">
            <button
              class="btn w-100"
              style="background-color:#FF7444; color:white; font-weight:600;"
              (click)="getWeeklySales()"
            >
              <i class="fas fa-search me-1"></i>Load Weekly Sales
            </button>
          </div>
        </div>

        <!-- LOADING -->
        <div *ngIf="loading" class="text-center my-5">
          <div class="spinner-border" style="color:#576A8F;"></div>
          <p class="mt-2">Loading weekly sales...</p>
        </div>

        <!-- TABLE -->
        <div *ngIf="!loading && sales.length" class="table-responsive">
          <table class="table table-striped table-hover">
            <thead style="background-color:#576A8F; color:white;">
              <tr>
                <th>Bill ID</th>
                <th>Customer</th>
                <th>Date</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let sale of sales">
                <td>{{ sale.billId }}</td>
                <td>{{ sale.customer }}</td>
                <td>{{ sale.billDate | date:'dd/MM/yyyy' }}</td>
                <td style="font-weight:600; color:#FF7444;">
                  {{ sale.totalAmount | currency:'INR':'symbol':'1.2-2' }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- NO DATA -->
        <div *ngIf="!loading && sales.length === 0" class="alert alert-warning">
          No sales found for this week.
        </div>

      </div>
    </div>
  </div>
</div>
